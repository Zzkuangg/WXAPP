# 环境配置

> Ubuntu18.04

# JAVA

> 普通用户登录,当前路径为个人文件夹根目录

1. 创建存放个人文件的文件夹MyFile,用远程工具传到这

   ```
   sudo mkdir MyFile
   ```

2. 文件传上来之后,创建应用安装目录

   ```
   sudo mkdir /usr/local/Program
   ```

3. 解压文件

   ```
   sudo tar -zxvf MyFile/jdk-8u331-linux-x64.tar.gz -C /usr/local/Program/
   ```

4. 修改配置文件

   ```
   sudo vim /etc/profile
   ```

   末尾沾上

   ```
   export JAVA_HOME=/usr/local/Program/jdk1.8.0_331
   export JRE_HOME=${JAVA_HOME}/jre
   export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
   export PATH=${JAVA_HOME}/bin:$PATH
   ```

5. 重新加载配置

   ```
   source /etc/profile
   ```

6. 验证是否成功

   ```
   java -version
   ```

   > java version "1.8.0_331"
   > Java(TM) SE Runtime Environment (build 1.8.0_331-b09)
   > Java HotSpot(TM) 64-Bit Server VM (build 25.331-b09, mixed mode)

# Tomcat

> 文件还是在MyFile,在用户根目录执行命令,已上传文件

1. 解压至指定目录

   ```
   sudo tar -zxvf MyFile/apache-tomcat-8.5.78.tar.gz -C /usr/local/Program/
   ```

2. 切换至指定目录,赋权限

   ```
   cd /usr/local/Program/
   ```

   ```
   sudo chmod 755 -R apache-tomcat-8.5.78/
   ```

3. 修改启动文件

   ```
   sudo vim apache-tomcat-8.5.78/bin/startup.sh
   ```

   在最后一行前加入

   ```
   #set java environment
   export JAVA_HOME=/usr/local/Program/jdk1.8.0_331
   export JRE_HOME=${JAVA_HOME}/jre
   export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib
   export PATH=${JAVA_HOME}/bin:$PATH
   
   #tomcat
   export TOMCAT_HOME=/usr/local/Program/apache-tomcat-8.5.78
   ```

4. 修改关闭文件

   ```
   sudo vim apache-tomcat-8.5.78/bin/shutdown.sh
   ```

   同样的加入

   ```
   #set java environment
   export JAVA_HOME=/usr/local/Program/jdk1.8.0_331
   export JRE_HOME=${JAVA_HOME}/jre
   export CLASSPATH=.:%{JAVA_HOME}/lib:%{JRE_HOME}/lib
   export PATH=${JAVA_HOME}/bin:$PATH
   
   #tomcat
   export TOMCAT_HOME=/usr/local/Program/apache-tomcat-8.5.78
   ```

5. 进入bin

   ```
   cd apache-tomcat-8.5.78/bin/
   ```

6. 启动

   ```
   sudo ./startup.sh
   ```

   

   

# MySQL

参考：[Ubuntu18.04 安装MySQL5.7 - springsnow - 博客园 (cnblogs.com)](https://www.cnblogs.com/springsnow/p/12206227.html)

# Ubuntu端口

1. 查看防火墙情况

   ```
   sudo ufw status
   ```

2. 开放端口

   ```
   sudo ufw allow 8080
   ```

3. 重启防火墙

   ```
   sudo ufw reload
   ```

4. 打开防火墙

   ```
   sudo ufw enable
   ```

# SSL安装

> 当前在tomcat根目录(与bin同级)

1. 购买证书,下载文件,解压,将tomcat对应的jks和txt文件传到服务器

2. 在tomcat安装目录创建文件夹cert

   ```
   sudo mkdir cert
   ```

   将两个文件放进去

   ```
   sudo mv /home/kuang/MyFile/scs1650950098192_www.zzkuang.top_keystorePass.txt  cert/
   sudo mv /home/kuang/MyFile/scs1650950098192_www.zzkuang.top_server.jks  cert/
   ```

3. 修改conf下的server.xml

   ```
   sudo vim conf/server.xml 
   ```

   将里面8843端口的改为如下

   ```
   <Connector port="443" protocol="org.apache.coyote.http11.Http11NioProtocol"
                  maxThreads="150" SSLEnabled="true">
           <SSLHostConfig>
               <Certificate certificateKeystoreFile="/usr/local/Program/apache-tomcat-8.5.78/cert/scs1650950098192_www.zzkuang.top_server.jks"
                     certificateKeystorePassword= "Di6^2Hcc0e$WwhSy"
                       type="RSA" />
           </SSLHostConfig>
       </Connector>
   ```

   * 注意密码不是txt文件而是里面的内容

   修改host标签内的localhost为域名

   ```
   <Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol"
                  maxThreads="150" SSLEnabled="true">
           <SSLHostConfig>
               <Certificate certificateKeystoreFile="/usr/local/Program/apache-tomcat-8.5.78/cert/scs1650950098192_www.zzkuang.top_server.jks"
                     certificateKeystorePassword= "/usr/local/Program/apache-tomcat-8.5.78/cert/scs1650950098192_www.zzkuang.top_keystorePass.txt"
                       type="RSA" />
           </SSLHostConfig>
       </Connector>
   ```

4. 重启tomcat

